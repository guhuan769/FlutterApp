# 相机照片系统

## 项目概述

这是一个相机照片管理系统Android应用，主要功能是管理项目、车辆和轨迹的照片数据。应用采用了现代Android开发技术栈，包括Jetpack Compose、Room、Retrofit、Dagger Hilt等。

## 功能模块

项目遵循清晰的层次结构: 项目 > 车辆(1项目对多车辆) > 轨迹(1车辆对应多轨迹)

### 1. 项目模块

- 创建、查看、编辑、删除项目
- 项目列表展示
- 项目统计信息展示
- 项目照片拍摄和管理

### 2. 车辆模块

- 创建、查看、编辑、删除车辆
- 车辆列表按项目分组
- 车辆详细信息展示
- 车辆照片拍摄和管理

### 3. 轨迹模块

- 创建、查看、编辑、删除轨迹
- 轨迹列表按车辆分组
- 轨迹详细信息展示
- 轨迹起点、中间点、终点照片管理
- 轨迹状态控制（开始/结束）

### 4. 拍照模块

- 模型照片拍摄
- 轨迹起点、中间点、终点照片拍摄
- 照片预览和删除

### 5. 相册模块

- 按项目、车辆、轨迹分类查看照片
- 照片预览、删除和分享
- 照片详细信息展示

### 6. 设置模块

- 服务器地址配置
- 图片质量设置
- 存储空间管理

## 项目架构

项目采用Clean Architecture + MVVM架构模式，分为以下几层：

1. **表现层(Presentation)**
   - 使用Jetpack Compose构建UI
   - ViewModel管理UI状态
   - Screen组件负责展示

2. **领域层(Domain)**
   - 包含业务逻辑和规则
   - 定义仓库接口
   - 包含领域模型

3. **数据层(Data)**
   - 仓库实现
   - 本地数据源(Room数据库)
   - 远程数据源(Retrofit API)
   - 数据映射器

## 技术栈

- **UI**: Jetpack Compose, Material3
- **依赖注入**: Dagger Hilt
- **本地存储**: Room
- **网络**: Retrofit, OkHttp
- **异步处理**: Kotlin Coroutines, Flow
- **图片加载**: Coil
- **相机**: CameraX

## 数据持久化

- 所有数据操作通过Repository模式管理
- 本地数据使用Room数据库保存
- 远程数据通过Retrofit进行API通信
- 图片文件存储在应用私有目录

## 开发规范

1. 创建新文件前检查是否有类似功能的文件，避免代码冗余
2. 将通用功能提取到公共模块
3. 使用依赖注入管理对象创建
4. 使用扩展函数增加功能
5. 遵循DRY原则(Don't Repeat Yourself)

## 后端接口

后端接口由BackendInterface项目提供，使用ASP.NET Core开发，提供以下功能：

- 项目数据同步
- 照片上传和管理
- 数据统计和分析

## 未来改进方向

1. 添加用户认证系统
2. 增强离线模式功能
3. 增加数据备份和恢复功能
4. 优化图片压缩和处理
5. 添加地图集成功能