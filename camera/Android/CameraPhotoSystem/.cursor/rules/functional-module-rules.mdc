---
description: 功能模块实现规则
globs: 
alwaysApply: false
---
# 功能模块实现规则
- 项目模块功能：拍照(自定义相机界面中心绘制十字标识，拍照界面总共4个按钮，最好这四个按钮都能与原生相机一样当自拍杆蓝牙连接时，精准控制选择的拍照按钮。 起始点拍照(照片命名规则 如起始点拍照_序号(自动增加))、中间点拍照(照片命名规则 如中间点拍照_序号(自动增加))、模型点拍照(照片命名规则 如模型点始点拍照_序号(自动增加))、结束点拍照(照片命名规则 如结束点拍照_序号(自动增加))。如果是项目模块只允许点击模型点拍照。)、相册(相册实现隔离)、添加车辆、上传
  
- 车辆模块功能：拍照(自定义相机界面中心绘制十字标识，拍照界面总共4个按钮，最好这四个按钮都能与原生相机一样当自拍杆蓝牙连接时，精准控制选择的拍照按钮。 起始点拍照(照片命名规则 如起始点拍照_序号(自动增加))、中间点拍照(照片命名规则 如中间点拍照_序号(自动增加))、模型点拍照(照片命名规则 如模型点始点拍照_序号(自动增加))、结束点拍照(照片命名规则 如结束点拍照_序号(自动增加))。如果是项目模块只允许点击模型点拍照。)、相册(相册实现隔离)、轨迹管理
  
- 轨迹模块功能：照片浏览(相册实现隔离)、拍照 (自定义相机界面中心绘制十字标识，拍照界面总共4个按钮，最好这四个按钮都能与原生相机一样当自拍杆蓝牙连接时，精准控制选择的拍照按钮。 起始点拍照(照片命名规则 如起始点拍照_序号(自动增加))、中间点拍照(照片命名规则 如中间点拍照_序号(自动增加))、模型点拍照(照片命名规则 如模型点始点拍照_序号(自动增加))、结束点拍照(照片命名规则 如结束点拍照_序号(自动增加))。如果是项目模块只允许点击模型点拍照。)
  
- 使用CameraX API实现拍照功能（达到原生相机拍照的分辨率，以手机最高为主，最好能添加分辨率自动选择。默认最大）
- 使用MediaStore API管理相册功能
- 使用WorkManager实现后台上传
- 使用Room数据库存储本地数据
- 实现实时同步机制，保持前后端数据一致性



# 相机功能实现规则

## CameraX实现规范
- 必须使用CameraX API实现相机功能
- 相机分辨率必须设置为手机支持的最高分辨率，提供分辨率自动选择机制
- 相机对焦必须支持点击屏幕对焦和自动对焦两种模式
- 必须实现适配蓝牙自拍杆触发拍照功能

## 照片命名规则
- 起始点照片命名格式：起始点拍照_[自动增加序号]
- 中间点照片命名格式：中间点拍照_[自动增加序号]
- 模型点照片命名格式：模型点拍照_[自动增加序号]
- 结束点照片命名格式：结束点拍照_[自动增加序号]
- 序号生成必须基于当前模块已有照片数量，确保连续性

## 相册功能实现
- 使用MediaStore API管理相册功能
- 相册必须按模块隔离：项目相册、车辆相册、轨迹相册
- 照片浏览必须支持放大、缩小、旋转等操作
- 照片删除必须包含确认机制，防止误操作




